<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zhangbin.yun.yunrights.modules.rights.mapper.ApiRightsMapper">
    <resultMap id="BaseResultMap" type="com.zhangbin.yun.yunrights.modules.rights.model.$do.ApiRightsDO">
        <result column="api_id" jdbcType="BIGINT" property="id"/>
        <result column="api_group" jdbcType="VARCHAR" property="group"/>
        <result column="api_tag" jdbcType="VARCHAR" property="tag"/>
        <result column="api_url" jdbcType="VARCHAR" property="url"/>
        <result column="api_authorization" jdbcType="VARCHAR" property="authorization"/>
        <result column="api_description" jdbcType="VARCHAR" property="description"/>
    </resultMap>

    <sql id="Base_Column_List">
        api_id, api_group, api_tag, api_url, api_authorization, api_description
    </sql>

    <select id="selectAllByCriteria"
            parameterType="com.zhangbin.yun.yunrights.modules.rights.model.criteria.ApiRightsQueryCriteria"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_sys_user
        <trim prefix="where" prefixOverrides="and | or">
            <if test='criteria != null'>
                <if test='criteria.blurry != null and criteria.blurry != "" and criteria.blurryType != null'>
                    <if test='criteria.blurryType.isMatch("group")'>
                        and api_group like concat('%', #{criteria.blurry}, '%')
                    </if>
                    <if test='criteria.blurryType.isMatch("tag")'>
                        and api_tag like concat('%', #{criteria.blurry}, '%')
                    </if>
                    <if test='criteria.blurryType.isMatch("description")'>
                        and api_description like concat('%', #{criteria.blurry}, '%')
                    </if>
                    <if test='criteria.blurryType.isMatch("url")'>
                        and api_url like concat('%', #{criteria.blurry}, '%')
                    </if>
                </if>
            </if>
        </trim>
    </select>
</mapper>
